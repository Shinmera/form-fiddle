<!DOCTYPE html> <html lang="EN"> <head> <meta charset="utf-8"> <title>Form Fiddle</title> <style>html body{margin:0 auto 0 auto;padding:20px;max-width:1024px;font-family:sans-serif;font-size:14pt;overflow-y:scroll;}html body a{text-decoration:none;}html body a[href]{color:#0055AA;}html body a[href]:hover{color:#0088EE;}html body pre{background:#FAFAFA;border:1px solid #DDDDDD;padding:0.75em;overflow-x:auto;}html body pre >code a[href]{color:#223388;}article.project h1{font-size:1.7em;}article.project h1,article.project h2,article.project h3,article.project h4,article.project h5,article.project h6{margin:0.2em 0 0.1em 0;text-indent:1em;}article.project >header{text-align:center;}article.project >header img.logo{display:block;margin:auto;max-height:170px;}article.project >header h1{display:inline-block;text-indent:0;font-size:2.5em;}article.project >header .version{vertical-align:bottom;}article.project >header .languages{margin-top:-0.5em;text-transform:capitalize;}article.project >header .description{margin:0;}article.project >header .pages{margin-top:0.5em;font-size:1.2em;text-transform:capitalize;}article.project >header .pages a{display:inline-block;padding:0 0.2em;}article.project >section{margin:1em 0 1em 0;}article.project >section img{max-width:100%;}article.project #index >ul{list-style:none;margin:0;padding:0;}article.project .row label{display:inline-block;min-width:8em;}article.project #system .row{display:flex;}article.project #system #dependencies{display:inline;margin:0;padding:0;}article.project #system #dependencies li{display:inline;padding:0 0.2em;}article.project #system #author label{vertical-align:top;}article.project #system #author ul{display:inline-block;margin:0;padding:0;list-style:none;}article.project #toc nav>*{margin-left:1em;display:block;}article.definition{margin:1em 0 0 0;}article.definition >header h1,article.definition >header h2,article.definition >header h3,article.definition >header h4,article.definition >header h5,article.definition >header h6{text-indent:0;display:inline-block;}article.definition >header ul{display:inline-block;list-style:none;margin:0;padding:0;}article.definition >header ul li{display:inline-block;padding:0 0.2em 0 0;}article.definition >header .visibility{display:none;}article.definition >header .visibility,article.definition >header .type{text-transform:lowercase;}article.definition >header .source-link{visibility:hidden;float:right;}article.definition >header .source-link:after{visibility:visible;content:"[SRC]";}article.definition .docstring{margin:0 0 0 1em;}article.definition .docstring pre{font-size:0.8em;white-space:pre-wrap;}.definition.package >header ul.nicknames{display:inline-block;list-style:none;margin:0;padding:0 0 0 1em;}.definition.package >header ul.nicknames li{display:inline;}.definition.package >header ul.nicknames:before{content:"(";}.definition.package >header ul.nicknames:after{content:")";}.definition.package ul.definitions{margin:0;list-style:none;padding:0 0 0 0.5em;}.definition.callable >header .name:before,.definition.type >header .name:before{content:"(";font-weight:normal;}.definition.callable >header .arguments:after,.definition.type >header .arguments:after{content:")";}.definition.callable >header .arguments .arguments:before,.definition.type >header .arguments .arguments:before{content:"(";}.definition.callable >header .arguments .argument,.definition.type >header .arguments .argument{padding:0;}.definition.callable >header .arguments .argument.lambda-list-keyword,.definition.type >header .arguments .argument.lambda-list-keyword{color:#991155;}.definition li>mark{background:none;border-left:0.3em solid #0088EE;padding-left:0.3em;display:block;}@media (min-width: 1300px){html body{padding-left:16em;}article.project #toc{margin:0;position:fixed;left:0;top:0;bottom:0;width:15em;overflow-y:auto;background:#F0F0F0;border-right:1px solid #A0A0A0;}}</style> </head> <body> <article class="project"> <header>   <h1>form fiddle</h1>   <span class="version">1.1.0</span>    <p class="description">A collection of utilities to destructure lambda forms.</p>   </header> <section id="toc"> <h2>Table of Contents</h2> <nav> <a href="#project">Top</a>  <a href="#documentation">Documentation</a> <nav> <a href="#about_form-fiddle">About Form-Fiddle</a>  <a href="#how_to">How To</a>  <a href="#see_also">See Also</a> </nav>  <a href="#system">System</a>  <a href="#system">Packages</a> <nav> <a href="#PACKAGE%20FORM-FIDDLE">FORM-FIDDLE</a> </nav>  </nav> </section>  <section id="documentation"><h2 id="about_form-fiddle">About Form-Fiddle</h2> <p>Often times I need to destructure a form definition in a macro. This is a set of simple utilities to help with that.</p> <h2 id="how_to">How To</h2> <p>There's individual functions to extract each part of a lambda-definition-form: function, name, qualifiers, lambda-list, body, declarations, docstring and the forms. You can get all in one with <code><a href="#FUNCTION%20FORM-FIDDLE%3ASPLIT-LAMBDA-FORM" class="xref">split-lambda-form</a></code>, or directly as a binding macro with <code><a href="#MACRO-FUNCTION%20FORM-FIDDLE%3AWITH-DESTRUCTURED-LAMBDA-FORM" class="xref">with-destructured-lambda-form</a></code>.</p> <pre><code>(<a href="#FUNCTION%20FORM-FIDDLE%3ASPLIT-LAMBDA-FORM" class="xref">split-lambda-form</a> '(defun lambda-body (lambda-form)
                      (cddr lambda-form)))

<a href="http://l1sp.org/cl/destructuring-bind" class="xref">(</a><a href="#MACRO-FUNCTION%20FORM-FIDDLE%3AWITH-DESTRUCTURED-LAMBDA-FORM" class="xref">with-destructured-lambda-form</a> (:forms forms)
    '(defmacro foo (bar)
       (declare (ignore bar))
       &quot;Testing macro!&quot;
       (print &quot;test!&quot;))
  forms)
</code></pre> <h2 id="see_also">See Also</h2> <ul> <li><a href="https://shinmera.github.io/lambda-fiddle">Lambda-Fiddle</a> To destructure lambda-lists.</li> </ul> </section>    <section id="system"> <h2>System Information</h2>  <div class="row"> <label for="version">Version:</label> <a id="version">1.1.0</a> </div>   <div class="row"> <label for="dependencies">Dependencies:</label> <ul id="dependencies"><li><a class="external" href="https://Shinmera.github.io/documentation-utils/">documentation-utils</a></li></ul> </div>   <div class="row" id="author"> <label for="author">Author:</label> <a href="mailto:shinmera@tymoon.eu">Yukari Hafner</a> </div>   <div class="row"> <label for="license">License:</label> <a id="license" href="https://github.com/Shinmera/form-fiddle/blob/3bd0dfdae8f83918fce6cb4a05826bd325da401d/LICENSE">zlib</a> </div>   <div class="row"> <label for="homepage">Homepage:</label> <a id="homepage" href="https://Shinmera.github.io/form-fiddle/">https://Shinmera.github.io/form-fiddle/</a> </div>   <div class="row"> <label for="bug-tracker">Bug Tracker:</label> <a id="bug-tracker" href="https://github.com/Shinmera/form-fiddle/issues">https://github.com/Shinmera/form-fiddle/issues</a> </div>   <div class="row"> <label for="sources">Sources:</label> <a id="sources" href="https://github.com/Shinmera/form-fiddle.git">https://github.com/Shinmera/form-fiddle.git</a> </div>  </section>    <section id="index"> <h2>Definition Index</h2> <ul> <li> <article class="definition package" id="PACKAGE FORM-FIDDLE"> <header> <h3> <a href="#PACKAGE%20FORM-FIDDLE">FORM-FIDDLE</a> </h3> <ul class="nicknames"> <li>ORG.SHIRAKUMO.FORM-FIDDLE</li> </ul>  </header> <div class="docstring"><i>No documentation provided.</i></div> <ul class="definitions"> <li> <article class="definition function callable" id="FUNCTION FORM-FIDDLE:LAMBDA-BODY"> <header> <span class="visibility">EXTERNAL</span> <span class="type">FUNCTION</span> <h4 class="name"> <a href="#FUNCTION%20FORM-FIDDLE%3ALAMBDA-BODY">LAMBDA-BODY</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">LAMBDA-FORM</li>    <li class="argument lambda-list-keyword">&amp;REST</li>  </ul>  <a class="source-link" href="https://github.com/Shinmera/form-fiddle/blob/3bd0dfdae8f83918fce6cb4a05826bd325da401d/form-fiddle.lisp#L27">Source</a>  </header> <div class="docstring"><pre>Returns all BODY forms of the lambda-form.

                                         |¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯v¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯|
 (function [name] qualifier* lambda-list [[docstring? | declaration*]] form*)</pre></div> </article> </li>  <li> <article class="definition function callable" id="FUNCTION FORM-FIDDLE:LAMBDA-DECLARATIONS"> <header> <span class="visibility">EXTERNAL</span> <span class="type">FUNCTION</span> <h4 class="name"> <a href="#FUNCTION%20FORM-FIDDLE%3ALAMBDA-DECLARATIONS">LAMBDA-DECLARATIONS</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">LAMBDA-FORM</li>    <li class="argument lambda-list-keyword">&amp;REST</li>  </ul>  <a class="source-link" href="https://github.com/Shinmera/form-fiddle/blob/3bd0dfdae8f83918fce6cb4a05826bd325da401d/form-fiddle.lisp#L43">Source</a>  </header> <div class="docstring"><pre>Returns the DECLARATIONS of the lambda-form, if any.

                                                             v
 (function [name] qualifier* lambda-list [[docstring? | declaration*]] form*)</pre></div> </article> </li>  <li> <article class="definition function callable" id="FUNCTION FORM-FIDDLE:LAMBDA-DOCSTRING"> <header> <span class="visibility">EXTERNAL</span> <span class="type">FUNCTION</span> <h4 class="name"> <a href="#FUNCTION%20FORM-FIDDLE%3ALAMBDA-DOCSTRING">LAMBDA-DOCSTRING</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">LAMBDA-FORM</li>    <li class="argument lambda-list-keyword">&amp;REST</li>  </ul>  <a class="source-link" href="https://github.com/Shinmera/form-fiddle/blob/3bd0dfdae8f83918fce6cb4a05826bd325da401d/form-fiddle.lisp#L33">Source</a>  </header> <div class="docstring"><pre>Returns the DOCSTRING of the lambda-form, if any.

                                               v
 (function [name] qualifier* lambda-list [[docstring? | declaration*]] form*)</pre></div> </article> </li>  <li> <article class="definition function callable" id="FUNCTION FORM-FIDDLE:LAMBDA-FORMS"> <header> <span class="visibility">EXTERNAL</span> <span class="type">FUNCTION</span> <h4 class="name"> <a href="#FUNCTION%20FORM-FIDDLE%3ALAMBDA-FORMS">LAMBDA-FORMS</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">LAMBDA-FORM</li>    <li class="argument lambda-list-keyword">&amp;REST</li>  </ul>  <a class="source-link" href="https://github.com/Shinmera/form-fiddle/blob/3bd0dfdae8f83918fce6cb4a05826bd325da401d/form-fiddle.lisp#L53">Source</a>  </header> <div class="docstring"><pre>Returns the actual body forms of the lambda-form, if any.

                                                                         v
 (function [name] qualifier* lambda-list [[docstring? | declaration*]] form*)</pre></div> </article> </li>  <li> <article class="definition function callable" id="FUNCTION FORM-FIDDLE:LAMBDA-FUNCTION"> <header> <span class="visibility">EXTERNAL</span> <span class="type">FUNCTION</span> <h4 class="name"> <a href="#FUNCTION%20FORM-FIDDLE%3ALAMBDA-FUNCTION">LAMBDA-FUNCTION</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">LAMBDA-FORM</li>    <li class="argument lambda-list-keyword">&amp;REST</li>  </ul>  <a class="source-link" href="https://github.com/Shinmera/form-fiddle/blob/3bd0dfdae8f83918fce6cb4a05826bd325da401d/form-fiddle.lisp#L9">Source</a>  </header> <div class="docstring"><pre>Returns the defining FUNCTION of the lambda-form.
     v
 (function [name] qualifier* lambda-list [[docstring? | declaration*]] form*)</pre></div> </article> </li>  <li> <article class="definition function callable" id="FUNCTION FORM-FIDDLE:LAMBDA-LAMBDA-LIST"> <header> <span class="visibility">EXTERNAL</span> <span class="type">FUNCTION</span> <h4 class="name"> <a href="#FUNCTION%20FORM-FIDDLE%3ALAMBDA-LAMBDA-LIST">LAMBDA-LAMBDA-LIST</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">LAMBDA-FORM</li>    <li class="argument lambda-list-keyword">&amp;REST</li>  </ul>  <a class="source-link" href="https://github.com/Shinmera/form-fiddle/blob/3bd0dfdae8f83918fce6cb4a05826bd325da401d/form-fiddle.lisp#L22">Source</a>  </header> <div class="docstring"><pre>Returns the LAMBDA-LIST of the lambda-form.

                                  v
 (function [name] qualifier* lambda-list [[docstring? | declaration*]] form*)</pre></div> </article> </li>  <li> <article class="definition function callable" id="FUNCTION FORM-FIDDLE:LAMBDA-NAME"> <header> <span class="visibility">EXTERNAL</span> <span class="type">FUNCTION</span> <h4 class="name"> <a href="#FUNCTION%20FORM-FIDDLE%3ALAMBDA-NAME">LAMBDA-NAME</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">LAMBDA-FORM</li>    <li class="argument lambda-list-keyword">&amp;REST</li>  </ul>  <a class="source-link" href="https://github.com/Shinmera/form-fiddle/blob/3bd0dfdae8f83918fce6cb4a05826bd325da401d/form-fiddle.lisp#L12">Source</a>  </header> <div class="docstring"><pre>Returns the NAME of the lambda-form, if any.

             v
 (function [name] qualifier* lambda-list [[docstring? | declaration*]] form*)</pre></div> </article> </li>  <li> <article class="definition function callable" id="FUNCTION FORM-FIDDLE:LAMBDA-QUALIFIERS"> <header> <span class="visibility">EXTERNAL</span> <span class="type">FUNCTION</span> <h4 class="name"> <a href="#FUNCTION%20FORM-FIDDLE%3ALAMBDA-QUALIFIERS">LAMBDA-QUALIFIERS</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">LAMBDA-FORM</li>    <li class="argument lambda-list-keyword">&amp;REST</li>  </ul>  <a class="source-link" href="https://github.com/Shinmera/form-fiddle/blob/3bd0dfdae8f83918fce6cb4a05826bd325da401d/form-fiddle.lisp#L16">Source</a>  </header> <div class="docstring"><pre>Returns the QUALIFIERS of the lambda-form.

                      v
 (function [name] qualifier* lambda-list [[docstring? | declaration*]] form*)</pre></div> </article> </li>  <li> <article class="definition function callable" id="FUNCTION FORM-FIDDLE:SPLIT-BODY-OPTIONS"> <header> <span class="visibility">EXTERNAL</span> <span class="type">FUNCTION</span> <h4 class="name"> <a href="#FUNCTION%20FORM-FIDDLE%3ASPLIT-BODY-OPTIONS">SPLIT-BODY-OPTIONS</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">BODY</li>    <li class="argument lambda-list-keyword">&amp;REST</li>  </ul>  <a class="source-link" href="https://github.com/Shinmera/form-fiddle/blob/3bd0dfdae8f83918fce6cb4a05826bd325da401d/form-fiddle.lisp#L148">Source</a>  </header> <div class="docstring"><pre>Parses the body into two separate lists of forms and options.
This is found in some expressions like in the clause body of RESTART-CASE.

BODY   ::= OPTION* FORM*
OPTION ::= KEYWORD EXPRESSION</pre></div> </article> </li>  <li> <article class="definition function callable" id="FUNCTION FORM-FIDDLE:SPLIT-LAMBDA-FORM"> <header> <span class="visibility">EXTERNAL</span> <span class="type">FUNCTION</span> <h4 class="name"> <a href="#FUNCTION%20FORM-FIDDLE%3ASPLIT-LAMBDA-FORM">SPLIT-LAMBDA-FORM</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">LAMBDA-FORM</li>    <li class="argument lambda-list-keyword">&amp;REST</li>  </ul>  <a class="source-link" href="https://github.com/Shinmera/form-fiddle/blob/3bd0dfdae8f83918fce6cb4a05826bd325da401d/form-fiddle.lisp#L65">Source</a>  </header> <div class="docstring"><pre>Returns all parts of a lambda-form as a list in the following order:
 FUNCTION NAME QUALIFIERS LAMBDA-LIST DOCSTRING DECLARATIONS FORMS</pre></div> </article> </li>  <li> <article class="definition macro callable" id="MACRO-FUNCTION FORM-FIDDLE:WITH-BODY-OPTIONS"> <header> <span class="visibility">EXTERNAL</span> <span class="type">MACRO</span> <h4 class="name"> <a href="#MACRO-FUNCTION%20FORM-FIDDLE%3AWITH-BODY-OPTIONS">WITH-BODY-OPTIONS</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <ul class="arguments"> <li class="argument">BODY</li>  <li class="argument">OTHER-OPTIONS</li>  <li class="argument lambda-list-keyword">&amp;REST</li>  <li class="argument">OPTIONS</li>  <li class="argument lambda-list-keyword">&amp;REST</li> </ul>    <li class="argument">FORM</li>    <li class="argument lambda-list-keyword">&amp;BODY</li>    <li class="argument">BODY-FORMS</li>    <li class="argument lambda-list-keyword">&amp;REST</li>  </ul>  <a class="source-link" href="https://github.com/Shinmera/form-fiddle/blob/3bd0dfdae8f83918fce6cb4a05826bd325da401d/form-fiddle.lisp#L161">Source</a>  </header> <div class="docstring"><pre>Destructures the body according to split-body-kargs.

OTHER-OPTIONS will be bound to contain all the options that occur in the body but
were not explicitly requested in OPTIONS. BODY will be bound to the remaining
body forms. Each option in OPTIONS can be either a symbol or a list of symbol and
default. The symbol is automatically converted to a keyword to match against the
body options.</pre></div> </article> </li>  <li> <article class="definition macro callable" id="MACRO-FUNCTION FORM-FIDDLE:WITH-DESTRUCTURED-LAMBDA-FORM"> <header> <span class="visibility">EXTERNAL</span> <span class="type">MACRO</span> <h4 class="name"> <a href="#MACRO-FUNCTION%20FORM-FIDDLE%3AWITH-DESTRUCTURED-LAMBDA-FORM">WITH-DESTRUCTURED-LAMBDA-FORM</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <ul class="arguments"> <li class="argument lambda-list-keyword">&amp;KEY</li>  <li class="argument">FUNCTION</li>  <li class="argument">NAME</li>  <li class="argument">QUALIFIERS</li>  <li class="argument">LAMBDA-LIST</li>  <li class="argument">DOCSTRING</li>  <li class="argument">DECLARATIONS</li>  <li class="argument">FORMS</li>  <li class="argument lambda-list-keyword">&amp;REST</li> </ul>    <li class="argument">EXPRESSION</li>    <li class="argument lambda-list-keyword">&amp;BODY</li>    <li class="argument">BODY</li>    <li class="argument lambda-list-keyword">&amp;REST</li>  </ul>  <a class="source-link" href="https://github.com/Shinmera/form-fiddle/blob/3bd0dfdae8f83918fce6cb4a05826bd325da401d/form-fiddle.lisp#L133">Source</a>  </header> <div class="docstring"><pre>Destructures the given EXPRESSION into its lambda-form parts.</pre></div> </article> </li> </ul> </article> </li> </ul> </section>  </article> <script>window.addEventListener("DOMContentLoaded", function(){
    var unmarkElement = function(el){
        if(el.tagName === "mark" || el.tagName === "MARK"){
            [].forEach.call(el.childNodes, function(child){
                el.parentNode.insertBefore(child, el);
            });
            el.parentNode.removeChild(el);
        }else if(el.parentNode.tagName === "mark"){
            return unmarkElement(el.parentNode);
        }
        return null;
    }

    var unmarkAll = function(root){
        root = root || document;
        [].forEach.call(root.querySelectorAll("mark"), unmarkElement);
    }
    
    var markElement = function(el){
        if(el.parentNode.tagName === "mark" || el.parentNode.tagName === "MARK"){
            return el.parentNode;
        } else {
            unmarkAll();
            var marked = document.createElement("mark");
            el.parentNode.insertBefore(marked, el);
            marked.appendChild(el);
            return marked;
        }
    }

    var markFragmented = function(){
        if(window.location.hash){
            var el = document.getElementById(decodeURIComponent(window.location.hash.substr(1)));
            if(el) markElement(el);
        }
    }

    var registerXrefLink = function(link){
        var el = document.getElementById(decodeURIComponent(link.getAttribute("href").substr(1)));
        if(el){
            link.addEventListener("click", function(){
                markElement(el);
            });
        }
    }

    var registerXrefLinks = function(root){
        root = root || document;
        [].forEach.call(root.querySelectorAll("a.xref"), registerXrefLink);
    }

    markFragmented();
    registerXrefLinks();
}); </script> </body> </html> 